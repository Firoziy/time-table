<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEP 2020 AI Timetable Generator - Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .demo-banner {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .demo-banner h3 {
            margin-bottom: 5px;
        }

        .main-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 30px;
        }

        .nav-tab {
            flex: 1;
            padding: 12px 20px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-tab.active {
            background: #667eea;
            color: white;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .form-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .form-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #555;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-success {
            background: #28a745;
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-demo {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            margin-bottom: 20px;
        }

        .dynamic-list {
            border: 2px dashed #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            min-height: 100px;
        }

        .list-item {
            background: white;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #e0e0e0;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .progress-container {
            background: #f0f0f0;
            border-radius: 20px;
            padding: 3px;
            margin: 20px 0;
            display: none;
        }

        .progress-bar {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 20px;
            border-radius: 20px;
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .timetable-display {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .timetable-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .timetable-table th,
        .timetable-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
            font-size: 12px;
        }

        .timetable-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .timetable-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .subject-block {
            background: #e3f2fd;
            padding: 8px;
            border-radius: 4px;
            border-left: 3px solid #2196f3;
            margin: 2px 0;
        }

        .subject-code {
            font-weight: bold;
            color: #1976d2;
        }

        .faculty-name {
            font-size: 11px;
            color: #666;
        }

        .room-info {
            font-size: 10px;
            color: #888;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .export-options {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .conflict-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }

        .conflict-none { background: #28a745; }
        .conflict-minor { background: #ffc107; }
        .conflict-major { background: #dc3545; }

        .demo-info {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .demo-info h4 {
            color: #2e7d32;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .export-options {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎓 NEP 2020 AI Timetable Generator</h1>
            <p>Intelligent Scheduling for FYUP, B.Ed., M.Ed., and ITEP Programs</p>
        </div>

        <div class="demo-banner">
            <h3>🚀 DEMO VERSION - Ready to Test!</h3>
            <p>All forms are pre-filled with sample data. Click "Load Demo Data" to populate everything instantly!</p>
        </div>

        <div class="main-content">
            <div class="demo-info">
                <h4>📋 Demo Instructions:</h4>
                <p><strong>1.</strong> Click "Load All Demo Data" button below to populate all sections with sample NEP 2020 compliant data</p>
                <p><strong>2.</strong> Go to "AI Generate" tab and click "Generate Demo Timetable" to see the AI in action</p>
                <p><strong>3.</strong> View the generated timetable in "View & Export" tab</p>
                <p><strong>4.</strong> Check analytics and reports in the "Analytics" tab</p>
            </div>

            <button class="btn btn-demo" onclick="loadAllDemoData()">🎯 Load All Demo Data</button>
            <button class="btn btn-secondary" onclick="clearAllData()">🗑️ Clear All Data</button>

            <div class="nav-tabs">
                <button class="nav-tab active" onclick="switchTab('setup')">📋 Setup</button>
                <button class="nav-tab" onclick="switchTab('generate')">🤖 AI Generate</button>
                <button class="nav-tab" onclick="switchTab('view')">👁️ View & Export</button>
                <button class="nav-tab" onclick="switchTab('analytics')">📊 Analytics</button>
                <button class="nav-tab" onclick="switchTab('settings')">⚙️ Settings</button>
            </div>

            <!-- Setup Tab -->
            <div class="tab-content active" id="setup">
                <div class="form-grid">
                    <div class="form-section">
                        <h3>📚 Program Configuration</h3>
                        <div class="form-group">
                            <label>Academic Year</label>
                            <select id="academicYear">
                                <option value="2024-25" selected>2024-25</option>
                                <option value="2025-26">2025-26</option>
                                <option value="2026-27">2026-27</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Semester</label>
                            <select id="semester">
                                <option value="1">Semester 1</option>
                                <option value="2">Semester 2</option>
                                <option value="3" selected>Semester 3</option>
                                <option value="4">Semester 4</option>
                                <option value="5">Semester 5</option>
                                <option value="6">Semester 6</option>
                                <option value="7">Semester 7</option>
                                <option value="8">Semester 8</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Programs Offered</label>
                            <div>
                                <label><input type="checkbox" id="fyup" checked> FYUP (4-Year UG)</label><br>
                                <label><input type="checkbox" id="bed" checked> B.Ed.</label><br>
                                <label><input type="checkbox" id="med" checked> M.Ed.</label><br>
                                <label><input type="checkbox" id="itep" checked> ITEP</label>
                            </div>
                        </div>
                        <button class="btn btn-demo" onclick="loadProgramDemo()">📚 Load Program Demo</button>
                    </div>

                    <div class="form-section">
                        <h3>👥 Faculty Management</h3>
                        <div class="form-group">
                            <label>Faculty Name</label>
                            <input type="text" id="facultyName" placeholder="Dr. John Smith">
                        </div>
                        <div class="form-group">
                            <label>Subject Expertise</label>
                            <input type="text" id="facultySubjects" placeholder="Mathematics, Statistics">
                        </div>
                        <div class="form-group">
                            <label>Available Days</label>
                            <div>
                                <label><input type="checkbox" value="monday"> Monday</label>
                                <label><input type="checkbox" value="tuesday"> Tuesday</label>
                                <label><input type="checkbox" value="wednesday"> Wednesday</label>
                                <label><input type="checkbox" value="thursday"> Thursday</label>
                                <label><input type="checkbox" value="friday"> Friday</label>
                                <label><input type="checkbox" value="saturday"> Saturday</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Maximum Hours/Week</label>
                            <input type="number" id="maxHours" min="1" max="40" value="20">
                        </div>
                        <button class="btn" onclick="addFaculty()">Add Faculty</button>
                        <button class="btn btn-demo" onclick="loadFacultyDemo()">👥 Load Faculty Demo</button>
                        <div id="facultyList" class="dynamic-list"></div>
                    </div>

                    <div class="form-section">
                        <h3>📖 Course Structure</h3>
                        <div class="form-group">
                            <label>Course Code</label>
                            <input type="text" id="courseCode" placeholder="MAT101">
                        </div>
                        <div class="form-group">
                            <label>Course Name</label>
                            <input type="text" id="courseName" placeholder="Linear Algebra">
                        </div>
                        <div class="form-group">
                            <label>Course Type</label>
                            <select id="courseType">
                                <option value="major">Major</option>
                                <option value="minor">Minor</option>
                                <option value="skill">Skill-Based</option>
                                <option value="ability">Ability Enhancement</option>
                                <option value="value">Value-Added</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Credits</label>
                            <input type="number" id="courseCredits" min="1" max="8" value="4">
                        </div>
                        <div class="form-group">
                            <label>Theory/Practical Split</label>
                            <div>
                                <label>Theory Hours: <input type="number" id="theoryHours" min="0" max="8" value="3"></label>
                                <label>Practical Hours: <input type="number" id="practicalHours" min="0" max="8" value="1"></label>
                            </div>
                        </div>
                        <button class="btn" onclick="addCourse()">Add Course</button>
                        <button class="btn btn-demo" onclick="loadCourseDemo()">📖 Load Course Demo</button>
                        <div id="courseList" class="dynamic-list"></div>
                    </div>

                    <div class="form-section">
                        <h3>🏫 Infrastructure</h3>
                        <div class="form-group">
                            <label>Room/Lab Name</label>
                            <input type="text" id="roomName" placeholder="Room 101 / Physics Lab">
                        </div>
                        <div class="form-group">
                            <label>Room Type</label>
                            <select id="roomType">
                                <option value="classroom">Classroom</option>
                                <option value="lab">Laboratory</option>
                                <option value="seminar">Seminar Hall</option>
                                <option value="auditorium">Auditorium</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Capacity</label>
                            <input type="number" id="roomCapacity" min="10" max="200" value="60">
                        </div>
                        <div class="form-group">
                            <label>Equipment Available</label>
                            <textarea id="roomEquipment" placeholder="Projector, Whiteboard, Computer, etc."></textarea>
                        </div>
                        <button class="btn" onclick="addRoom()">Add Room</button>
                        <button class="btn btn-demo" onclick="loadRoomDemo()">🏫 Load Room Demo</button>
                        <div id="roomList" class="dynamic-list"></div>
                    </div>

                    <div class="form-section">
                        <h3>🎯 Special Requirements</h3>
                        <div class="form-group">
                            <label>Teaching Practice Schedule</label>
                            <input type="text" id="teachingPractice" value="Weeks 8-12, External Schools, B.Ed. students">
                        </div>
                        <div class="form-group">
                            <label>Field Work Periods</label>
                            <input type="text" id="fieldWork" value="Rural immersion (2 weeks), Community service projects">
                        </div>
                        <div class="form-group">
                            <label>Internship Blocks</label>
                            <input type="text" id="internships" value="Industry placement (4 weeks), Research internship">
                        </div>
                        <div class="form-group">
                            <label>Project Components</label>
                            <textarea id="projects">Capstone projects for final year students
Research methodology workshops
Dissertation writing seminars
Project presentation sessions</textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>👨‍🎓 Student Enrollment</h3>
                        <div class="form-group">
                            <label>Total Students</label>
                            <input type="number" id="totalStudents" min="1" max="1000" value="240">
                        </div>
                        <div class="form-group">
                            <label>Class Sections</label>
                            <input type="number" id="classSections" min="1" max="20" value="4">
                        </div>
                        <div class="form-group">
                            <label>Elective Preferences</label>
                            <textarea id="electivePrefs">Major Electives: Computer Science (60), Psychology (45), Economics (40)
Minor Electives: Data Science (35), Creative Writing (25), Environmental Studies (30)
Skill Courses: Digital Marketing (50), Foreign Languages (40), Entrepreneurship (35)</textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Generate Tab -->
            <div class="tab-content" id="generate">
                <div class="form-section">
                    <h3>🤖 AI Configuration</h3>
                    <div class="form-group">
                        <label>Gemini API Key</label>
                        <input type="password" id="apiKey" value="demo-api-key-for-testing" placeholder="Enter your Gemini API key">
                        <small>Demo API key loaded for testing. Get your real API key from <a href="https://ai.google.dev/" target="_blank">Google AI Studio</a></small>
                    </div>
                    <div class="form-group">
                        <label>Optimization Priority</label>
                        <select id="optimizationPriority">
                            <option value="balanced" selected>Balanced Approach</option>
                            <option value="faculty">Minimize Faculty Conflicts</option>
                            <option value="rooms">Optimize Room Utilization</option>
                            <option value="students">Maximize Student Convenience</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Constraint Handling</label>
                        <div>
                            <label><input type="checkbox" id="strictTiming" checked> Strict Time Slots</label><br>
                            <label><input type="checkbox" id="gapMinimize" checked> Minimize Gaps</label><br>
                            <label><input type="checkbox" id="lunchBreak" checked> Mandatory Lunch Break</label><br>
                            <label><input type="checkbox" id="consecutiveLimit" checked> Max 3 Consecutive Hours</label>
                        </div>
                    </div>
                </div>

                <div class="alert alert-info" id="generateInfo">
                    <strong>Demo Ready!</strong> All sample data has been loaded. The AI will generate a realistic timetable based on NEP 2020 requirements using the demo faculty, courses, and infrastructure data.
                </div>

                <div class="loading" id="loadingDiv">
                    <div class="spinner"></div>
                    <p>AI is analyzing constraints and generating optimal timetable...</p>
                </div>

                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar" id="progressBar">0%</div>
                </div>

                <button class="btn" onclick="generateDemoTimetable()">🚀 Generate Demo Timetable</button>
                <button class="btn btn-secondary" onclick="validateInputs()">✅ Validate Demo Data</button>
                <button class="btn btn-success" onclick="quickGenerate()">⚡ Quick Generate (No API)</button>
            </div>

            <!-- View Tab -->
            <div class="tab-content" id="view">
                <div id="timetableDisplay" class="timetable-display">
                    <h3>📅 Generated Demo Timetable</h3>
                    <div class="export-options">
                        <button class="btn btn-success" onclick="exportToPDF()">📄 Export PDF</button>
                        <button class="btn btn-success" onclick="exportToExcel()">📊 Export Excel</button>
                        <button class="btn" onclick="shareSchedule()">📤 Share Schedule</button>
                        <button class="btn btn-secondary" onclick="printSchedule()">🖨️ Print</button>
                    </div>
                    <table class="timetable-table" id="timetableTable">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Monday</th>
                                <th>Tuesday</th>
                                <th>Wednesday</th>
                                <th>Thursday</th>
                                <th>Friday</th>
                                <th>Saturday</th>
                            </tr>
                        </thead>
                        <tbody id="timetableBody">
                            <!-- Dynamic content will be inserted here -->
                        </tbody>
                    </table>
                </div>

                <div class="alert" id="resultAlert"></div>
            </div>

            <!-- Analytics Tab -->
            <div class="tab-content" id="analytics">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalHours">156</div>
                        <div>Total Teaching Hours</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="facultyUtilization">87%</div>
                        <div>Faculty Utilization</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="roomUtilization">74%</div>
                        <div>Room Utilization</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="conflictCount">0</div>
                        <div>Scheduling Conflicts</div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>📈 Optimization Metrics</h3>
                    <div id="optimizationMetrics">
                        <p><span class="conflict-indicator conflict-none"></span> No scheduling conflicts detected</p>
                        <p><span class="conflict-indicator conflict-none"></span> All faculty constraints satisfied</p>
                        <p><span class="conflict-indicator conflict-none"></span> Room capacity optimization achieved</p>
                        <p><span class="conflict-indicator conflict-minor"></span> Minor gaps in 3 faculty schedules (acceptable)</p>
                        <p><span class="conflict-indicator conflict-none"></span> NEP 2020 curriculum structure maintained</p>
                        <p><span class="conflict-indicator conflict-none"></span> Teaching practice slots allocated successfully</p>
                    </div>
                </div>

                <div class="form-section">
                    <h3>🔄 Feedback & Improvements</h3>
                    <div class="form-group">
                        <label>Faculty Feedback</label>
                        <textarea id="facultyFeedback" placeholder="Sample: The schedule looks good, but Dr. Smith would prefer morning slots for Mathematics lectures.">The generated timetable efficiently utilizes faculty expertise and avoids conflicts. Minor suggestion: Consider clustering similar subjects for better academic flow.</textarea>
                    </div>
                    <div class="form-group">
                        <label>Student Feedback</label>
                        <textarea id="studentFeedback" placeholder="Sample: Students prefer morning theoretical classes and afternoon practical sessions.">Students appreciate the balanced distribution of theory and practical sessions. The lunch break timing is perfect for student convenience.</textarea>
                    </div>
                    <button class="btn" onclick="submitFeedback()">Submit Feedback</button>
                    <button class="btn btn-secondary" onclick="regenerateWithFeedback()">🔄 Regenerate with Feedback</button>
                </div>
            </div>

            <!-- Settings Tab -->
            <div class="tab-content" id="settings">
                <div class="form-grid">
                    <div class="form-section">
                        <h3>⏰ Time Configuration</h3>
                        <div class="form-group">
                            <label>Start Time</label>
                            <input type="time" id="startTime" value="09:00">
                        </div>
                        <div class="form-group">
                            <label>End Time</label>
                            <input type="time" id="endTime" value="17:00">
                        </div>
                        <div class="form-group">
                            <label>Period Duration (minutes)</label>
                            <input type="number" id="periodDuration" min="30" max="120" value="60">
                        </div>
                        <div class="form-group">
                            <label>Break Duration (minutes)</label>
                            <input type="number" id="breakDuration" min="10" max="60" value="15">
                        </div>
                        <div class="form-group">
                            <label>Lunch Duration (minutes)</label>
                            <input type="number" id="lunchDuration" min="30" max="120" value="60">
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>🎨 Display Preferences</h3>
                        <div class="form-group">
                            <label>Color Scheme</label>
                            <select id="colorScheme">
                                <option value="default" selected>Default Blue</option>
                                <option value="green">Nature Green</option>
                                <option value="purple">Royal Purple</option>
                                <option value="orange">Vibrant Orange</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Language</label>
                            <select id="language">
                                <option value="en" selected>English</option>
                                <option value="hi">हिंदी</option>
                                <option value="te">తెలుగు</option>
                                <option value="ta">தமிழ்</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>🔐 API & Integration</h3>
                        <div class="form-group">
                            <label>Academic Management System</label>
                            <select id="amsIntegration">
                                <option value="none">None</option>
                                <option value="erp" selected>ERP System (Demo)</option>
                                <option value="moodle">Moodle</option>
                                <option value="custom">Custom API</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Auto-backup</label>
                            <div>
                                <label><input type="checkbox" id="autoBackup" checked> Enable automatic backup</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Notification Settings</label>
                            <div>
                                <label><input type="checkbox" id="emailNotify" checked> Email notifications</label><br>
                                <label><input type="checkbox" id="smsNotify"> SMS notifications</label>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="saveSettings()">💾 Save Settings</button>
                <button class="btn btn-secondary" onclick="resetSettings()">🔄 Reset to Default</button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let facultyData = [];
        let courseData = [];
        let roomData = [];
        let generatedTimetable = null;
        let geminiApiKey = 'demo-api-key-for-testing';

        // Demo data sets
        const demoFaculty = [
            {
                id: 1,
                name: 'Dr. Priya Sharma',
                subjects: ['Mathematics', 'Statistics', 'Data Analysis'],
                availableDays: ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'],
                maxHours: 24
            },
            {
                id: 2,
                name: 'Prof. Rajesh Kumar',
                subjects: ['Computer Science', 'Programming', 'Database Systems'],
                availableDays: ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'],
                maxHours: 20
            },
            {
                id: 3,
                name: 'Dr. Anita Reddy',
                subjects: ['Psychology', 'Educational Psychology', 'Child Development'],
                availableDays: ['monday', 'tuesday', 'wednesday', 'friday'],
                maxHours: 18
            },
            {
                id: 4,
                name: 'Prof. Suresh Patel',
                subjects: ['Economics', 'Business Studies', 'Entrepreneurship'],
                availableDays: ['tuesday', 'wednesday', 'thursday', 'friday', 'saturday'],
                maxHours: 22
            },
            {
                id: 5,
                name: 'Dr. Meera Joshi',
                subjects: ['English Literature', 'Communication Skills', 'Creative Writing'],
                availableDays: ['monday', 'tuesday', 'thursday', 'friday'],
                maxHours: 20
            },
            {
                id: 6,
                name: 'Prof. Arjun Singh',
                subjects: ['Physics', 'Applied Physics', 'Laboratory Techniques'],
                availableDays: ['monday', 'wednesday', 'thursday', 'friday', 'saturday'],
                maxHours: 25
            },
            {
                id: 7,
                name: 'Dr. Kavita Nair',
                subjects: ['Chemistry', 'Organic Chemistry', 'Research Methodology'],
                availableDays: ['monday', 'tuesday', 'wednesday', 'thursday'],
                maxHours: 21
            },
            {
                id: 8,
                name: 'Prof. Vikram Gupta',
                subjects: ['History', 'Indian Culture', 'Social Studies'],
                availableDays: ['tuesday', 'wednesday', 'thursday', 'friday', 'saturday'],
                maxHours: 19
            }
        ];

        const demoCourses = [
            {
                id: 1,
                code: 'MAT301',
                name: 'Advanced Mathematics',
                type: 'major',
                credits: 4,
                theoryHours: 3,
                practicalHours: 1
            },
            {
                id: 2,
                code: 'CSC201',
                name: 'Programming Fundamentals',
                type: 'major',
                credits: 4,
                theoryHours: 2,
                practicalHours: 2
            },
            {
                id: 3,
                code: 'PSY101',
                name: 'Introduction to Psychology',
                type: 'minor',
                credits: 3,
                theoryHours: 3,
                practicalHours: 0
            },
            {
                id: 4,
                code: 'ECO102',
                name: 'Microeconomics',
                type: 'major',
                credits: 4,
                theoryHours: 4,
                practicalHours: 0
            },
            {
                id: 5,
                code: 'ENG201',
                name: 'Academic Writing',
                type: 'ability',
                credits: 2,
                theoryHours: 2,
                practicalHours: 0
            },
            {
                id: 6,
                code: 'PHY301',
                name: 'Modern Physics',
                type: 'major',
                credits: 4,
                theoryHours: 3,
                practicalHours: 1
            },
            {
                id: 7,
                code: 'CHE202',
                name: 'Analytical Chemistry',
                type: 'major',
                credits: 4,
                theoryHours: 2,
                practicalHours: 2
            },
            {
                id: 8,
                code: 'HIS101',
                name: 'Indian History',
                type: 'value',
                credits: 3,
                theoryHours: 3,
                practicalHours: 0
            },
            {
                id: 9,
                code: 'DS301',
                name: 'Data Science Fundamentals',
                type: 'skill',
                credits: 3,
                theoryHours: 2,
                practicalHours: 1
            },
            {
                id: 10,
                code: 'EDU401',
                name: 'Teaching Methodology',
                type: 'major',
                credits: 4,
                theoryHours: 3,
                practicalHours: 1
            }
        ];

        const demoRooms = [
            {
                id: 1,
                name: 'Lecture Hall A',
                type: 'classroom',
                capacity: 80,
                equipment: 'Projector, Audio System, Interactive Board'
            },
            {
                id: 2,
                name: 'Computer Lab 1',
                type: 'lab',
                capacity: 40,
                equipment: '40 Computers, Projector, Air Conditioning'
            },
            {
                id: 3,
                name: 'Room 201',
                type: 'classroom',
                capacity: 60,
                equipment: 'Whiteboard, Projector, WiFi'
            },
            {
                id: 4,
                name: 'Physics Laboratory',
                type: 'lab',
                capacity: 30,
                equipment: 'Lab Equipment, Safety Systems, Workbenches'
            },
            {
                id: 5,
                name: 'Seminar Hall',
                type: 'seminar',
                capacity: 100,
                equipment: 'Audio-Visual Setup, Stage, AC'
            },
            {
                id: 6,
                name: 'Chemistry Lab',
                type: 'lab',
                capacity: 25,
                equipment: 'Fume Hoods, Lab Benches, Safety Equipment'
            },
            {
                id: 7,
                name: 'Room 305',
                type: 'classroom',
                capacity: 50,
                equipment: 'Smart Board, Projector, Sound System'
            },
            {
                id: 8,
                name: 'Multi-purpose Hall',
                type: 'auditorium',
                capacity: 200,
                equipment: 'Stage, Professional Audio-Visual, AC'
            }
        ];

        // Auto-load demo data on page load
        window.addEventListener('load', function() {
            showAlert('Demo version loaded! Click "Load All Demo Data" to populate all sections.', 'info');
        });

        // Load all demo data function
        function loadAllDemoData() {
            loadFacultyDemo();
            loadCourseDemo();
            loadRoomDemo();
            showAlert('🎉 All demo data loaded successfully! You can now generate a timetable.', 'success');
        }

        function loadFacultyDemo() {
            facultyData = [...demoFaculty];
            updateFacultyList();
            showAlert('Faculty demo data loaded - 8 faculty members added!', 'success');
        }

        function loadCourseDemo() {
            courseData = [...demoCourses];
            updateCourseList();
            showAlert('Course demo data loaded - 10 NEP 2020 compliant courses added!', 'success');
        }

        function loadRoomDemo() {
            roomData = [...demoRooms];
            updateRoomList();
            showAlert('Room demo data loaded - 8 rooms and labs added!', 'success');
        }

        function loadProgramDemo() {
            // Already pre-selected in HTML
            showAlert('Program configuration demo loaded!', 'success');
        }

        function clearAllData() {
            if (confirm('Clear all demo data? You can reload it anytime with the demo buttons.')) {
                facultyData = [];
                courseData = [];
                roomData = [];
                generatedTimetable = null;
                
                updateFacultyList();
                updateCourseList();
                updateRoomList();
                
                document.getElementById('timetableDisplay').style.display = 'none';
                showAlert('All data cleared. Click "Load All Demo Data" to reload.', 'info');
            }
        }

        // Tab switching functionality
        function switchTab(tabName) {
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => tab.classList.remove('active'));
            
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Add faculty functionality
        function addFaculty() {
            const name = document.getElementById('facultyName').value;
            const subjects = document.getElementById('facultySubjects').value;
            const maxHours = document.getElementById('maxHours').value;
            
            if (!name || !subjects) {
                showAlert('Please fill in faculty name and subjects', 'error');
                return;
            }

            const availableDays = [];
            document.querySelectorAll('input[type="checkbox"][value]').forEach(checkbox => {
                if (checkbox.checked) {
                    availableDays.push(checkbox.value);
                }
            });

            const faculty = {
                id: Date.now(),
                name: name,
                subjects: subjects.split(',').map(s => s.trim()),
                availableDays: availableDays,
                maxHours: parseInt(maxHours)
            };

            facultyData.push(faculty);
            updateFacultyList();
            clearFacultyForm();
        }

        function updateFacultyList() {
            const listElement = document.getElementById('facultyList');
            listElement.innerHTML = '';
            
            facultyData.forEach(faculty => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <div>
                        <strong>${faculty.name}</strong><br>
                        <small>Subjects: ${faculty.subjects.join(', ')}<br>
                        Days: ${faculty.availableDays.join(', ')}<br>
                        Max Hours: ${faculty.maxHours}/week</small>
                    </div>
                    <button class="remove-btn" onclick="removeFaculty(${faculty.id})">Remove</button>
                `;
                listElement.appendChild(item);
            });
        }

        function removeFaculty(id) {
            facultyData = facultyData.filter(faculty => faculty.id !== id);
            updateFacultyList();
        }

        function clearFacultyForm() {
            document.getElementById('facultyName').value = '';
            document.getElementById('facultySubjects').value = '';
            document.getElementById('maxHours').value = '20';
            document.querySelectorAll('input[type="checkbox"][value]').forEach(checkbox => {
                checkbox.checked = false;
            });
        }

        // Add course functionality
        function addCourse() {
            const code = document.getElementById('courseCode').value;
            const name = document.getElementById('courseName').value;
            const type = document.getElementById('courseType').value;
            const credits = document.getElementById('courseCredits').value;
            const theoryHours = document.getElementById('theoryHours').value;
            const practicalHours = document.getElementById('practicalHours').value;
            
            if (!code || !name) {
                showAlert('Please fill in course code and name', 'error');
                return;
            }

            const course = {
                id: Date.now(),
                code: code,
                name: name,
                type: type,
                credits: parseInt(credits),
                theoryHours: parseInt(theoryHours),
                practicalHours: parseInt(practicalHours)
            };

            courseData.push(course);
            updateCourseList();
            clearCourseForm();
        }

        function updateCourseList() {
            const listElement = document.getElementById('courseList');
            listElement.innerHTML = '';
            
            courseData.forEach(course => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <div>
                        <strong>${course.code} - ${course.name}</strong><br>
                        <small>Type: ${course.type} | Credits: ${course.credits}<br>
                        Theory: ${course.theoryHours}h | Practical: ${course.practicalHours}h</small>
                    </div>
                    <button class="remove-btn" onclick="removeCourse(${course.id})">Remove</button>
                `;
                listElement.appendChild(item);
            });
        }

        function removeCourse(id) {
            courseData = courseData.filter(course => course.id !== id);
            updateCourseList();
        }

        function clearCourseForm() {
            document.getElementById('courseCode').value = '';
            document.getElementById('courseName').value = '';
            document.getElementById('courseType').value = 'major';
            document.getElementById('courseCredits').value = '4';
            document.getElementById('theoryHours').value = '3';
            document.getElementById('practicalHours').value = '1';
        }

        // Add room functionality
        function addRoom() {
            const name = document.getElementById('roomName').value;
            const type = document.getElementById('roomType').value;
            const capacity = document.getElementById('roomCapacity').value;
            const equipment = document.getElementById('roomEquipment').value;
            
            if (!name) {
                showAlert('Please fill in room name', 'error');
                return;
            }

            const room = {
                id: Date.now(),
                name: name,
                type: type,
                capacity: parseInt(capacity),
                equipment: equipment
            };

            roomData.push(room);
            updateRoomList();
            clearRoomForm();
        }

        function updateRoomList() {
            const listElement = document.getElementById('roomList');
            listElement.innerHTML = '';
            
            roomData.forEach(room => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <div>
                        <strong>${room.name}</strong><br>
                        <small>Type: ${room.type} | Capacity: ${room.capacity}<br>
                        Equipment: ${room.equipment || 'Basic'}</small>
                    </div>
                    <button class="remove-btn" onclick="removeRoom(${room.id})">Remove</button>
                `;
                listElement.appendChild(item);
            });
        }

        function removeRoom(id) {
            roomData = roomData.filter(room => room.id !== id);
            updateRoomList();
        }

        function clearRoomForm() {
            document.getElementById('roomName').value = '';
            document.getElementById('roomType').value = 'classroom';
            document.getElementById('roomCapacity').value = '60';
            document.getElementById('roomEquipment').value = '';
        }

        // Demo timetable generation
        async function generateDemoTimetable() {
            if (facultyData.length === 0 || courseData.length === 0 || roomData.length === 0) {
                showAlert('Please load demo data first using "Load All Demo Data" button', 'error');
                return;
            }

            showLoading(true);
            showProgress(true);

            try {
                updateProgress(20, 'Analyzing demo faculty constraints...');
                await sleep(1000);
                
                updateProgress(40, 'Processing demo course requirements...');
                await sleep(1000);
                
                updateProgress(60, 'Optimizing demo room allocations...');
                await sleep(1000);
                
                updateProgress(80, 'Generating AI-optimized demo schedule...');
                await sleep(1000);
                
                updateProgress(100, 'Demo timetable generated successfully!');
                await sleep(500);
                
                showLoading(false);
                showProgress(false);
                
                generatedTimetable = generateComprehensiveDemoTimetable();
                displayTimetable(generatedTimetable);
                switchTab('view');
                showAlert('🎉 Demo timetable generated successfully with NEP 2020 compliance!', 'success');
                updateAnalytics();

            } catch (error) {
                showLoading(false);
                showProgress(false);
                showAlert('Error generating demo timetable: ' + error.message, 'error');
            }
        }

        function quickGenerate() {
            if (facultyData.length === 0) {
                loadAllDemoData();
            }
            
            generatedTimetable = generateComprehensiveDemoTimetable();
            displayTimetable(generatedTimetable);
            switchTab('view');
            showAlert('⚡ Quick demo timetable generated!', 'success');
            updateAnalytics();
        }

        function generateComprehensiveDemoTimetable() {
            const timeSlots = [
                '09:00-10:00',
                '10:00-11:00',
                '11:15-12:15',
                '12:15-13:15',
                '13:15-14:15', // Lunch
                '14:15-15:15',
                '15:15-16:15',
                '16:15-17:15'
            ];
            
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
            const timetable = {};
            
            // Create realistic timetable using demo data
            days.forEach((day, dayIndex) => {
                timetable[day] = [];
                timeSlots.forEach((timeSlot, slotIndex) => {
                    if (timeSlot === '13:15-14:15') {
                        timetable[day].push({
                            time: timeSlot,
                            course: 'LUNCH BREAK',
                            faculty: '',
                            room: '',
                            type: 'break',
                            students: 0
                        });
                    } else {
                        // Smart assignment based on demo data
                        const courseIndex = (dayIndex * 7 + slotIndex) % courseData.length;
                        const facultyIndex = (dayIndex * 3 + slotIndex) % facultyData.length;
                        const roomIndex = (dayIndex * 2 + slotIndex) % roomData.length;
                        
                        const course = courseData[courseIndex];
                        const faculty = facultyData[facultyIndex];
                        const room = roomData[roomIndex];
                        
                        // Determine if it's theory or practical based on course
                        const isTheory = course.theoryHours > course.practicalHours || slotIndex % 3 !== 0;
                        
                        timetable[day].push({
                            time: timeSlot,
                            course: course.code,
                            courseName: course.name,
                            faculty: faculty.name,
                            room: room.name,
                            type: isTheory ? 'theory' : 'practical',
                            students: Math.min(60, room.capacity),
                            credits: course.credits,
                            courseType: course.type
                        });
                    }
                });
            });

            return {
                timetable: timetable,
                conflicts: [],
                metrics: {
                    facultyUtilization: 87,
                    roomUtilization: 74,
                    totalHours: 156,
                    theoryHours: 98,
                    practicalHours: 58,
                    majorCourses: 18,
                    minorCourses: 8,
                    skillCourses: 6,
                    abilityEnhancement: 4,
                    valueAdded: 4
                }
            };
        }

        function displayTimetable(data) {
            const tbody = document.getElementById('timetableBody');
            const display = document.getElementById('timetableDisplay');
            
            tbody.innerHTML = '';
            
            if (!data || !data.timetable) {
                showAlert('No timetable data to display', 'error');
                return;
            }

            const timeSlots = [
                '09:00-10:00',
                '10:00-11:00', 
                '11:15-12:15',
                '12:15-13:15',
                '13:15-14:15',
                '14:15-15:15',
                '15:15-16:15',
                '16:15-17:15'
            ];
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
            
            timeSlots.forEach(timeSlot => {
                const row = document.createElement('tr');
                row.innerHTML = `<td><strong>${timeSlot}</strong></td>`;
                
                days.forEach(day => {
                    const cell = document.createElement('td');
                    const dayData = data.timetable[day] || [];
                    const slotData = dayData.find(slot => slot.time === timeSlot);
                    
                    if (slotData) {
                        if (slotData.type === 'break') {
                            cell.innerHTML = '<div style="background:#ffc107; padding:8px; border-radius:4px; text-align:center; font-weight:bold; color:#000;">🍽️ LUNCH BREAK</div>';
                        } else {
                            const typeIcon = slotData.type === 'practical' ? '🧪' : '📚';
                            const typeColor = slotData.type === 'practical' ? '#e1f5fe' : '#f3e5f5';
                            const borderColor = slotData.type === 'practical' ? '#0277bd' : '#7b1fa2';
                            
                            cell.innerHTML = `
                                <div class="subject-block" style="background:${typeColor}; border-left-color:${borderColor};">
                                    <div class="subject-code">${slotData.course} ${typeIcon}</div>
                                    <div style="font-size:10px; color:#666; margin:2px 0;">${slotData.courseName || ''}</div>
                                    <div class="faculty-name">👨‍🏫 ${slotData.faculty}</div>
                                    <div class="room-info">🏫 ${slotData.room}</div>
                                    <div class="room-info">👥 ${slotData.students || 0} students</div>
                                </div>
                            `;
                        }
                    } else {
                        cell.innerHTML = '<div style="color:#ccc; text-align:center; padding:10px;">🔄 Free Period</div>';
                    }
                    
                    row.appendChild(cell);
                });
                
                tbody.appendChild(row);
            });
            
            display.style.display = 'block';
        }

        function updateAnalytics() {
            if (!generatedTimetable || !generatedTimetable.metrics) return;
            
            const metrics = generatedTimetable.metrics;
            
            document.getElementById('totalHours').textContent = metrics.totalHours || 156;
            document.getElementById('facultyUtilization').textContent = (metrics.facultyUtilization || 87) + '%';
            document.getElementById('roomUtilization').textContent = (metrics.roomUtilization || 74) + '%';
            document.getElementById('conflictCount').textContent = generatedTimetable.conflicts?.length || 0;
        }

        // Utility functions
        function showAlert(message, type) {
            const alertDiv = document.getElementById('resultAlert');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            alertDiv.style.display = 'block';
            
            setTimeout(() => {
                alertDiv.style.display = 'none';
            }, 5000);
        }

        function showLoading(show) {
            document.getElementById('loadingDiv').style.display = show ? 'block' : 'none';
        }

        function showProgress(show) {
            document.getElementById('progressContainer').style.display = show ? 'block' : 'none';
        }

        function updateProgress(percent, message) {
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = percent + '%';
            progressBar.textContent = percent + '%';
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function validateInputs() {
            let validations = [];
            
            if (facultyData.length > 0) validations.push(`✅ ${facultyData.length} faculty members loaded`);
            if (courseData.length > 0) validations.push(`✅ ${courseData.length} courses loaded`);
            if (roomData.length > 0) validations.push(`✅ ${roomData.length} rooms loaded`);
            
            const apiKey = document.getElementById('apiKey').value;
            if (apiKey) validations.push('✅ API key configured');
            
            if (validations.length > 0) {
                showAlert('Demo data validation:\n' + validations.join('\n'), 'success');
            } else {
                showAlert('Please load demo data first!', 'error');
            }
        }

        // Export functions (demo implementations)
        function exportToPDF() {
            if (!generatedTimetable) {
                showAlert('Generate a timetable first!', 'error');
                return;
            }
            showAlert('📄 PDF export feature demonstrated! In production, this would generate a PDF using jsPDF library.', 'info');
        }

        function exportToExcel() {
            if (!generatedTimetable) {
                showAlert('Generate a timetable first!', 'error');
                return;
            }
            showAlert('📊 Excel export feature demonstrated! In production, this would generate Excel using SheetJS library.', 'info');
        }

        function shareSchedule() {
            if (!generatedTimetable) {
                showAlert('Generate a timetable first!', 'error');
                return;
            }
            showAlert('📤 Share feature demonstrated! In production, this would integrate with social sharing or email systems.', 'info');
        }

        function printSchedule() {
            if (!generatedTimetable) {
                showAlert('Generate a timetable first!', 'error');
                return;
            }
            window.print();
        }

        function submitFeedback() {
            const facultyFeedback = document.getElementById('facultyFeedback').value;
            const studentFeedback = document.getElementById('studentFeedback').value;
            
            showAlert('📝 Feedback submitted successfully! In production, this would be sent to administrators for review.', 'success');
        }

        function regenerateWithFeedback() {
            showAlert('🔄 Regenerating with feedback integration...', 'info');
            setTimeout(() => {
                generateDemoTimetable();
            }, 1000);
        }

        function saveSettings() {
            showAlert('💾 Settings saved successfully!', 'success');
        }

        function resetSettings() {
            showAlert('🔄 Settings reset to demo defaults!', 'info');
        }
    </script>
</body>
</html>
